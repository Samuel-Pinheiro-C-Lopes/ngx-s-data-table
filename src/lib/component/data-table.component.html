<section class="__s-outer-container">
    <!-- Filters -->
     @if (useGeneralFilter) {
        <section class="__s-filter-outer">
            <input 
                [(ngModel)]="filterInput"
                placeholder="General search"
            />
            <button
                (click)="filterData()"
            >
                search
            </button>
        </section>
     }
    <section class="__s-container">
        <!-- The table displaying data -->
        <section class="__s-table-outer">
            <table class="__s-table">
                <!-- Header -->
                <thead>
                    <tr>
                        @for (prop of mapping; track prop.propertyName) {
                            <th>{{prop.columnName}}</th>
                        }
                    </tr>
                </thead>

                @if (useColumnsFilter) {
                    <tr>
                        @for (prop of filterMapping; track prop) {
                            <td class="__s-filter-row">
                                <input 
                                    [(ngModel)]="prop.inputFilter"
                                    [placeholder]="'Search by ' + prop.propertyMapping.propertyName"
                                />
                            </td>
                        }
                    </tr>
                }

                @for (element of paginatedData; track element) {
                    <tr
                        [class.__s-clickable]="useExpantion || useClick"
                        (click)="rowClicked(element)"
                    >
                        @for (prop of mapping; track prop.propertyName) {
                            <td>
                                <div 
                                    [textContent]="findPropertyValue(element, prop)" 
                                    class="__s-content"
                                ></div>
                            </td>
                        }
                    </tr>

                    <tr>
                        @if (primaryKeyProperty) {
                                <td
                                    [attr.keyValue]="element[primaryKeyProperty]"
                                    [attr.colspan]="mapping.length"
                                    class="s-table-td-full"
                                >
                                    <div class="__expandable-content">
                                        <div [innerHTML]="expandedPropertyAsSafe"></div>
                                        @if(expandedContent) {
                                            <ng-content *ngTemplateOutlet="expandedContent; context: { $implicit: element }"></ng-content>
                                        }
                                    </div>
                                </td>
                        }
                    </tr>
                }
            </table>
        </section>
        <!-- Pagination -->
        <section class="__s-pagination-outer">
            <button (click)="previousPage()">
                <div class="__s-arrow __s-left-arrow"></div>
            </button>
            <div class="__s-pagination-data">
                <input 
                    [(ngModel)]="labelTotalElements"
                    disabled
                />
                <input 
                    [(ngModel)]="labelActualPage"
                    disabled
                />
                <input 
                    [(ngModel)]="labelTotalPages"
                    disabled
                />
            </div>
            <button (click)="nextPage()">
                <div class="__s-arrow  __s-right-arrow"></div>
            </button>
        </section>
    </section>
</section>